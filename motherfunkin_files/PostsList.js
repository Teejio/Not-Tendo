this._gb=this._gb||{};this._gb.components=this._gb.components||{};this._gb.components.PostsList=function(e,t){"use strict";var o={name:"PostRecord",props:["post"],setup:function o(n){var a=t.helpers.getAxiosInstance();var r=e.inject("postService");var s=e.inject("memberCache");var l=e.computed((function(){return n.post._nStatus==3}));var c=e.ref();var i=e.ref();var p=e.computed((function(){return"".concat(window.location.origin,"/posts/").concat(n.post._idRow)}));var d=e.computed((function(){return encodeURIComponent(p.value)}));var u=t.helpers.useAsync(y),m=babelHelpers.slicedToArray(u,2),v=m[0],f=m[1];return{isTrashed:l,postService:r,memberCache:s,showStamps:k,stampsShown:c,loading:v,stamps:i,encodedPostURL:d};function k(){if(!c.value)f();c.value=true}async function y(){i.value=await a.get("Post/".concat(n.post._idRow,"/Stamps"))}}};var n=["id","data-pin-level"];var a={class:"PostHeader Cluster"};var r={class:"Poster"};var s=["data-label"];var l=e.createElementVNode("spriteIcon",{class:"MiscIcon SubmitIcon"},null,-1);var c={key:2,class:"PostIndicatorIcon AdminPinIcon"};var i={key:3,class:"PostIndicatorIcon SubmitterPinIcon"};var p={key:4,class:"PostIndicatorIcon EfPostIcon"};var d={key:5,class:"PostIndicatorIcon EfPostIcon"};var u={key:0,class:"RichText"};var m={class:"RichText"};var v={key:0,class:"PostImages Cluster"};var f=["href"];var k=["src","alt"];var y={key:2,class:"StrangeBerryModal TrashNotice"};var g=["href"];var _=["href"];var B=["href"];var h={class:"RedColor"};var E={class:"TrashDetails RedColor"};var b=["data-_sCategory"];var N={key:4,class:"StrangeBerryModal"};var P=e.createElementVNode("spriteIcon",{class:"MiscIcon CloseIcon"},null,-1);var C=[P];var V={key:1,class:"Cluster Stampers"};var S={class:"Flow"};var I=["data-_sCategory"];var w=["innerHTML"];var T={key:5,class:"PostFooter"};var R=["src","alt"];var D={class:"BananaTip"};var x=e.createElementVNode("div",{class:"Title"},"Mantra",-1);var F={key:6,class:"Cluster PostTools"};var A=e.createElementVNode("spriteIcon",{class:"PostToolIcon QuoteIcon"},null,-1);var M=[A];var L=e.createElementVNode("spriteIcon",{class:"SubnavigatorIcon EditIcon"},null,-1);var O=[L];var U=e.createElementVNode("spriteIcon",{class:"PostToolIcon StampIcon"},null,-1);var H=[U];var z=["disabled"];var j=e.createElementVNode("spriteIcon",{class:"PostToolIcon PinIcon"},null,-1);var G=[j];var W=["disabled"];var q=e.createElementVNode("spriteIcon",{class:"PostToolIcon UnpinIcon"},null,-1);var Q=[q];var Y=["disabled"];var J=e.createElementVNode("spriteIcon",{class:"PostToolIcon ExemplifyIcon"},null,-1);var K=[J];var X=["disabled"];var Z=e.createElementVNode("spriteIcon",{class:"PostToolIcon UnexemplifyIcon"},null,-1);var $=[Z];var ee=["disabled"];var te=e.createElementVNode("spriteIcon",{class:"PostToolIcon ExemplifyIcon"},null,-1);var oe=[te];var ne=["disabled"];var ae=e.createElementVNode("spriteIcon",{class:"PostToolIcon UnexemplifyIcon"},null,-1);var re=[ae];var se=e.createElementVNode("spriteIcon",{class:"EditorIcon LinkIcon"},null,-1);var le=[se];var ce=["href"];var ie=e.createElementVNode("spriteIcon",{class:"SubnavigatorIcon ReportIcon"},null,-1);var pe=[ie];var de=e.createElementVNode("spriteIcon",{class:"SubnavigatorIcon TrashIcon"},null,-1);var ue=[de];var me=e.createElementVNode("spriteIcon",{class:"SubnavigatorIcon UntrashIcon"},null,-1);var ve=[me];var fe=e.createElementVNode("div",{class:"FormWrapper"},null,-1);var ke={key:7,class:"Flow"};var ye=e.createElementVNode("spriteIcon",{class:"MiscIcon ShowContentIcon"},null,-1);var ge=e.createElementVNode("span",null,"Load Replies",-1);var _e=[ye,ge];var Be={class:"Replies Flow"};var he=e.createElementVNode("spriteIcon",{class:"MiscIcon ShowContentIcon"},null,-1);var Ee=e.createElementVNode("span",null,"Load More Replies",-1);var be=[he,Ee];function Ne(t,o,P,A,L,U){var j;var q=e.resolveComponent("BananaAvatar");var J=e.resolveComponent("BananaAvatarTooltip");var Z=e.resolveComponent("BananaUser");var te=e.resolveComponent("BananaTime");var ae=e.resolveComponent("itemCount");var se=e.resolveComponent("Loader");var ie=e.resolveComponent("PostRecord");var de=e.resolveDirective("tooltip-text");var me=e.resolveDirective("safe-html");var ye=e.resolveDirective("tooltip");return!(t.isTrashed&&!t.post._aTrashNotice&&!t.post._nReplyCount)?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["Post Flow",{Trashed:t.isTrashed}]),id:"post_".concat(t.post._idRow),"data-pin-level":t.post._iPinLevel},[e.createElementVNode("header",a,[!t.isTrashed?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createVNode(q,{user:t.post._aPoster,"data-user-tooltip":""},null,8,["user"]),e.createVNode(J,{user:t.memberCache[t.post._aPoster._idRow]},null,8,["user"]),e.createElementVNode("div",r,[e.createVNode(Z,{user:t.post._aPoster},null,8,["user"]),e.withDirectives((e.openBlock(),e.createElementBlock("small",null,[e.createTextVNode(e.toDisplayString(t.post._aPoster._sHonoraryTitle),1)])),[[de,"Honorary Title"]])]),(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.post._aLabels,(function(t){return e.openBlock(),e.createElementBlock("stateLabel",{"data-label":t,key:t},e.toDisplayString(t),9,s)})),128))],64)):e.createCommentVNode("v-if",true),e.createVNode(te,{timestamp:t.post._tsDateAdded,tooltipPrefix:"Posted: "},{default:e.withCtx((function(){return[l]})),_:1},8,["timestamp"]),t.post._tsDateModified?(e.openBlock(),e.createBlock(te,{key:1,timestamp:t.post._tsDateModified,tooltipPrefix:t.isTrashed?"Trashed: ":"Edited: "},{default:e.withCtx((function(){return[e.createElementVNode("spriteIcon",{class:e.normalizeClass(t.isTrashed?"SubnavigatorIcon TrashIcon":"SubnavigatorIcon EditIcon")},null,2)]})),_:1},8,["timestamp","tooltipPrefix"])):e.createCommentVNode("v-if",true),t.post._iPinLevel=="4"?e.withDirectives((e.openBlock(),e.createElementBlock("spriteIcon",c,null,512)),[[de,"Pinned by Site Staff"]]):e.createCommentVNode("v-if",true),t.post._iPinLevel=="3"?e.withDirectives((e.openBlock(),e.createElementBlock("spriteIcon",i,null,512)),[[de,"Pinned by Submitter"]]):e.createCommentVNode("v-if",true),t.post._iPinLevel=="2"?e.withDirectives((e.openBlock(),e.createElementBlock("spriteIcon",p,null,512)),[[de,"Top Answer"]]):e.createCommentVNode("v-if",true),t.post._iPinLevel=="1"?e.withDirectives((e.openBlock(),e.createElementBlock("spriteIcon",d,null,512)),[[de,"Exemplary Post"]]):e.createCommentVNode("v-if",true)]),t.isTrashed&&!t.post._aTrashNotice?(e.openBlock(),e.createElementBlock("article",u,"[Removed]")):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.withDirectives(e.createElementVNode("article",m,null,512),[[me,t.post._sText]]),(j=t.post._aPreviewMedia)!==null&&j!==void 0&&j._aImages?(e.openBlock(),e.createElementBlock("div",v,[(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.post._aPreviewMedia._aImages,(function(t){return e.openBlock(),e.createElementBlock("a",{href:"".concat(t._sBaseUrl,"/").concat(t._sFile),target:"_blank",rel:"noopener noreferrer",key:t},[e.createElementVNode("img",{src:"".concat(t._sBaseUrl,"/").concat(t._sFile100),alt:t._sCaption},null,8,k)],8,f)})),128))])):e.createCommentVNode("v-if",true)],64)),t.isTrashed&&t.post._aTrashNotice?(e.openBlock(),e.createElementBlock("div",y,[e.createElementVNode("p",null,[e.createTextVNode("Posted by "),e.createElementVNode("a",{href:t.post._aPoster._sProfileUrl},e.toDisplayString(t.post._aPoster._sName),9,g)]),e.createElementVNode("p",null,[e.createTextVNode("Trashed by "),e.createElementVNode("a",{href:t.post._aTrashNotice._aTrasher._sProfileUrl},e.toDisplayString(t.post._aTrashNotice._aTrasher._sName),9,_),!t.post._aTrashNotice._bIsTrashedByOwner?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(" for "),e.createElementVNode("a",{href:"/rules#".concat(t.post._aTrashNotice._aRuleViolated._sId)},"rule",8,B),e.createTextVNode(" violation "),e.createElementVNode("span",h,e.toDisplayString(t.post._aTrashNotice._aRuleViolated._sCode),1)],64)):e.createCommentVNode("v-if",true)]),e.withDirectives(e.createElementVNode("p",E,null,512),[[me,t.post._aTrashNotice._sDetails]])])):e.createCommentVNode("v-if",true),t.post._aStamps?(e.openBlock(),e.createElementBlock("ul",{key:3,class:e.normalizeClass(["PostStamps Cluster",{StampsExpanded:t.stampsShown}]),onClick:o[0]||(o[0]=function(){return t.showStamps&&t.showStamps.apply(t,arguments)})},[(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.post._aStamps,(function(t){return e.openBlock(),e.createElementBlock("li",{class:"PostStamp","data-_sCategory":t._sCategory,key:t},[e.createElementVNode("spriteIcon",{class:e.normalizeClass(t._sIconClasses)},null,2),e.createElementVNode("span",null,[e.createTextVNode(e.toDisplayString(t._sTitle)+" ",1),e.createVNode(ae,null,{default:e.withCtx((function(){return[e.createTextVNode("x"+e.toDisplayString(t._nCount),1)]})),_:2},1024)])],8,b)})),128))],2)):e.createCommentVNode("v-if",true),t.stampsShown?(e.openBlock(),e.createElementBlock("div",N,[e.createElementVNode("button",{class:"TransparentButton IconOnlyButton CloseButton",onClick:o[1]||(o[1]=function(e){return t.stampsShown=null})},C),t.loading?(e.openBlock(),e.createBlock(se,{key:0})):(e.openBlock(),e.createElementBlock("div",V,[(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.stamps,(function(t){return e.openBlock(),e.createElementBlock("div",S,[e.createElementVNode("div",{class:"PostStamp","data-_sCategory":t._sCategory},[e.createElementVNode("spriteIcon",{class:e.normalizeClass(t._sIconClasses)},null,2),e.createElementVNode("span",null,[e.createTextVNode(e.toDisplayString(t._sTitle)+" ",1),e.createVNode(ae,null,{default:e.withCtx((function(){return[e.createTextVNode("x"+e.toDisplayString(t._nCount),1)]})),_:2},1024)])],8,I),e.createElementVNode("ul",null,[(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t._aStampers,(function(t){return e.openBlock(),e.createElementBlock("li",{innerHTML:t},null,8,w)})),256))])])})),256))]))])):e.createCommentVNode("v-if",true),!t.isTrashed?(e.openBlock(),e.createElementBlock("footer",T,[t.post._aPoster._sSigUrl?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createElementVNode("img",{src:t.post._aPoster._sSigUrl,alt:"".concat(t.post._aPoster._sName," avatar")},null,8,R),e.withDirectives((e.openBlock(),e.createElementBlock("div",D,[x,e.createElementVNode("span",null,e.toDisplayString(t.post._aPoster._sUserTitle),1)])),[[ye]])],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(t.post._aPoster._sUserTitle),1)],64))])):e.createCommentVNode("v-if",true),t.post._aAccess?(e.openBlock(),e.createElementBlock("div",F,[t.post._aAccess.Post_Reply?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"IconOnlyButton",onClick:o[2]||(o[2]=function(e){return t.postService.actionHandler("reply",t.post)})},M)),[[de,"Reply"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_Edit?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"IconOnlyButton",onClick:o[3]||(o[3]=function(e){return t.postService.actionHandler("edit",t.post)})},O)),[[de,"Edit"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_Stamp?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:2,type:"button",class:"IconOnlyButton",onClick:o[4]||(o[4]=function(e){return t.postService.actionHandler("stamp",t.post)})},H)),[[de,"Stamp"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_Pin?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:3,type:"button",class:e.normalizeClass(["IconOnlyButton",{Processing:t.post.processing}]),onClick:o[5]||(o[5]=function(e){return t.postService.actionHandler("pin",t.post)}),disabled:t.post.processing},G,10,z)),[[de,"Pin"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_Unpin?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:4,type:"button",class:e.normalizeClass(["IconOnlyButton",{Processing:t.post.processing}]),onClick:o[6]||(o[6]=function(e){return t.postService.actionHandler("unpin",t.post)}),disabled:t.post.processing},Q,10,W)),[[de,"Unpin"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_Exemplify?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:5,type:"button",class:e.normalizeClass(["IconOnlyButton",{Processing:t.post.processing}]),onClick:o[7]||(o[7]=function(e){return t.postService.actionHandler("exemplify",t.post)}),disabled:t.post.processing},K,10,Y)),[[de,"Exemplify"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_Unexemplify?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:6,type:"button",class:e.normalizeClass(["IconOnlyButton",{Processing:t.post.processing}]),onClick:o[8]||(o[8]=function(e){return t.postService.actionHandler("unexemplify",t.post)}),disabled:t.post.processing},$,10,X)),[[de,"Unexemplify"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_SetTopAnswer?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:7,type:"button",class:e.normalizeClass(["IconOnlyButton",{Processing:t.post.processing}]),onClick:o[9]||(o[9]=function(e){return t.postService.actionHandler("setTopAnswer",t.post)}),disabled:t.post.processing},oe,10,ee)),[[de,"Make Top Answer"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_UnsetTopAnswer?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:8,type:"button",class:e.normalizeClass(["IconOnlyButton",{Processing:t.post.processing}]),onClick:o[10]||(o[10]=function(e){return t.postService.actionHandler("unsetTopAnswer",t.post)}),disabled:t.post.processing},re,10,ne)),[[de,"Remove Top Answer"]]):e.createCommentVNode("v-if",true),e.withDirectives((e.openBlock(),e.createElementBlock("button",{type:"button",class:"IconOnlyButton",onClick:o[11]||(o[11]=function(e){return t.postService.actionHandler("copy",t.post)})},le)),[[de,"Click to copy shareable link to post"]]),!t.post.accessorIsSelf?e.withDirectives((e.openBlock(),e.createElementBlock("a",{key:9,href:"/support/add?source=".concat(t.encodedPostURL),class:"ButtonLike IconOnlyButton"},pe,8,ce)),[[de,"Report this post if it breaks the site rules"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_Trash?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:10,type:"button",class:"IconOnlyButton",onClick:o[12]||(o[12]=function(e){return t.postService.actionHandler("trash",t.post)})},ue)),[[de,"Trash"]]):e.createCommentVNode("v-if",true),t.post._aAccess.Post_Untrash?e.withDirectives((e.openBlock(),e.createElementBlock("button",{key:11,type:"button",class:"IconOnlyButton",onClick:o[13]||(o[13]=function(e){return t.postService.actionHandler("untrash",t.post)})},ve)),[[de,"Untrash"]]):e.createCommentVNode("v-if",true)])):e.createCommentVNode("v-if",true),fe,t.post._nReplyCount?(e.openBlock(),e.createElementBlock("div",ke,[!t.post.dataSource.records.length?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"ExtendedContentButton",onClick:o[14]||(o[14]=function(e){return t.post.dataSource.load(1)})},_e)):e.createCommentVNode("v-if",true),e.createElementVNode("div",Be,[(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.post.dataSource.records,(function(t){return e.openBlock(),e.createBlock(ie,{post:t,key:t._idRow},null,8,["post"])})),128)),t.post.dataSource.loading?(e.openBlock(),e.createBlock(se,{key:0})):t.post.dataSource.records.length&&!t.post.dataSource.complete?(e.openBlock(),e.createElementBlock("button",{key:1,type:"button",class:"ExtendedContentButton",onClick:o[15]||(o[15]=function(e){return t.post.dataSource.load()})},be)):e.createCommentVNode("v-if",true)])])):e.createCommentVNode("v-if",true)],10,n)):e.createCommentVNode("v-if",true)}o.render=Ne;o.__file="src/_Components/PostsList/Post/index.vue";function Pe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(t){n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))}o.push.apply(o,n)}return o}function Ce(e){for(var t=1;t<arguments.length;t++){var o=arguments[t]!=null?arguments[t]:{};if(t%2){Pe(Object(o),true).forEach((function(t){babelHelpers.defineProperty(e,t,o[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(o))}else{Pe(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}}return e}var Ve={props:["config","item"],components:{Post:o},setup:function o(n){var a=t.helpers.getAxiosInstance();var r=e.inject("itemId");var s=e.inject("section");var l=e.inject("uiConfig");var c=e.ref();var i=e.ref();var p=e.ref();var d=e.ref();var u=e.reactive({_nPage:1,_nPerpage:15,_sSort:/Studio|Club|Member/.test(s.key)?"newest":"popular"});var m=t.helpers.useDataSource(A,u);var v=l._aNavOptions._sPaginationMode;var f=t.helpers.useTippyDelegate(),k=babelHelpers.slicedToArray(f,2),y=k[0],g=k[1];var _=t.helpers.useForm(M),B=babelHelpers.slicedToArray(_,2),h=B[0],E=B[1];var b=t.helpers.useForm(L),N=babelHelpers.slicedToArray(b,2),P=N[0],C=N[1];var V=t.helpers.useForm(O),S=babelHelpers.slicedToArray(V,2),I=S[0],w=S[1];var T=t.helpers.useForm(U),R=babelHelpers.slicedToArray(T,2),D=R[0],x=R[1];var F={actionHandler:G};e.provide("postService",F);e.provide("memberCache",g);m.load(1);return Ce(Ce(Ce({},m),F),{},{model:d,section:s,params:u,tippyDelegateConfig:y,memberCache:g,processing:h,trashProcessing:P,untrashProcessing:I,stampProcessing:D,submit:E,trash:C,untrash:w,stamp:x,reasons:c,untrashReasons:i,stamps:p,navigator:v});async function A(){if(s.key=="Post"){var o=Ce({},n.item);i(o);if(o._aReplies){o._aReplies._aRecords.forEach(i);o.params._nPage=2;o.dataSource.updateDataSource(o._aReplies)}return{_aMetadata:{_nRecordCount:1,_bIsComplete:true},_aRecords:[o]}}else{var c=await a.get("".concat(s.key,"/").concat(r,"/Posts"),{params:u});c._aRecords.forEach(i);return c}function i(o){o.params=e.reactive({_nPage:1,_nPerpage:20});o.dataSource=t.helpers.useDataSource(n,o.params);o.accessorIsSelf=o._nStatus!=3&&o._aPoster._idRow==l._idMemberRow;async function n(){var e=await a.get("Post/".concat(o._idRow,"/Posts"),{params:o.params});e._aRecords.forEach(i);return e}}}async function M(){var e;switch(d.value.action){case"add":e=await n(d.value.post);break;case"edit":e=await l(d.value.post);break;case"reply":e=await c(d.value.post,d.value.parent);break}if(d.value.parent){if(d.value.action=="edit")Object.assign(d.value.original,e._aPost);else{var o=d.value.parent;o._nReplyCount++;if(o.params._nPage==1)o.dataSource.load(1);else o.dataSource.records.unshift(e._aPost)}}else if(d.value.action=="edit")Object.assign(d.value.original,e._aPost);else{m.records.value.unshift(e._aPost)}d.value=null;t.helpers.successToast(e._sSuccessMessage);function n(e){return a.post("".concat(s.key,"/").concat(r,"/Post/Add"),e)}function l(e){return a.patch("Post/".concat(e._idRow),e)}function c(e,t){return a.post("/Post/".concat(t._idRow),e)}}async function L(){var e=await o(d.value);Object.assign(d.value.post,e._aPost);e._aPost._aAccess=null;d.value=null;t.helpers.successToast(e._sSuccessMessage);function o(e){return a["delete"]("/Post/".concat(e.post._idRow),{data:e})}}async function O(){var e=await o(d.value);Object.assign(d.value.post,e._aPost);e._aPost._aAccess=null;d.value=null;t.helpers.successToast(e._sSuccessMessage);function o(e){return a.patch("/Post/".concat(e.post._idRow,"/Untrash"),e)}}async function U(){var e=await o(d.value.stamps);d.value.post._aStamps=e._aStamps;d.value=null;t.helpers.successToast(e._sSuccessMessage);function o(e){return a.patch("/Post/".concat(d.value.post._idRow,"/Stamp"),{_aStampIds:e})}}async function H(){if(c.value)return;c.value=await a.get("Admin/Rules");if(!t.helpers.hasAdminAccess(l))c.value=c.value.filter((function(e){return!e._bIsAdminOnly}))}async function z(){if(i.value)return;i.value=await a.get("Util/Config/UntrashReasons");if(!t.helpers.hasAdminAccess(l))c.value=c.value.filter((function(e){return!e._bIsAdminOnly}))}async function j(){if(!p.value)p.value=(await a.get("Util/Config/Stamps")).reduce(e,{positive:[],negative:[],neutral:[]});p.value.config=[{title:"Positive",key:"positive",class:"GreenColor"},{title:"Negative",key:"negative",class:"RedColor"},{title:"Neutral",key:"neutral",class:"GreyColor"}];d.value.stamps=await a.get("Post/".concat(d.value.post._idRow,"/AccessorStamps"));function e(e,t){if(t._sUnlockName&&!l._aEnabledUnlocks.includes(t._sUnlockName)){t._idRow=""+t._idRow;t.locked=true;t._sIconClasses="MiscIcon RedLockIcon"}e[t._sCategory].push(t);return e}}function G(e,o){d.value={};d.value.action=e;switch(e){case"add":n();break;case"edit":r();break;case"reply":s();break;case"trash":l();break;case"untrash":c();break;case"stamp":i();break;case"copy":p();break;case"pin":u("pin");break;case"unpin":u("unpin");break;case"exemplify":u("exemplify");break;case"unexemplify":u("unexemplify");break;case"setTopAnswer":u("setTopAnswer");break;case"unsetTopAnswer":u("unsetTopAnswer");break}function n(){d.value.post={}}function r(){d.value.post=Ce({},o);d.value.original=o}function s(){d.value.post={};d.value.parent=o}function l(){d.value.post=o;if(!d.value.post.accessorIsSelf)H()}function c(){d.value.post=o;if(!d.value.post.accessorIsSelf)z()}function i(){d.value.post=o;j()}function p(){d.value={};window.navigator.clipboard.writeText("".concat(window.location.origin,"/posts/").concat(o._idRow));t.helpers.successToast("Link to post copied successfully!")}async function u(e){try{var n={pin:s,unpin:l,exemplify:c,unexemplify:i,setTopAnswer:p,unsetTopAnswer:u};o.processing=true;d.value=null;var r=await n[e]();t.helpers.successToast(r._sSuccessMessage);Object.assign(o,r._aPost)}finally{o.processing=false}function s(){return a.patch("/Post/".concat(o._idRow,"/Pin"))}function l(){return a["delete"]("/Post/".concat(o._idRow,"/Pin"))}function c(){return a.patch("/Post/".concat(o._idRow,"/Exemplify"))}function i(){return a.patch("/Post/".concat(o._idRow,"/Unexemplify"))}function p(){return a.patch("/Post/".concat(o._idRow,"/TopAnswer"))}function u(){return a["delete"]("/Post/".concat(o._idRow,"/TopAnswer"))}}}}};var Se={id:"PostsListModule"};var Ie={key:0};var we={class:"Content Flow"};var Te=e.createElementVNode("spriteIcon",{class:"SubmissionTypeSmall Post"},null,-1);var Re=e.createElementVNode("span",null,"Add Comment",-1);var De=[Te,Re];var xe=e.createElementVNode("div",{id:"PostsListModule_Add"},null,-1);var Fe={key:1,class:"StrangeBerryModal CategoryFilters"};var Ae=e.createElementVNode("span",null,"Sort: ",-1);var Me=["disabled"];var Le=e.createElementVNode("option",{value:"popular"},"Popular",-1);var Oe=e.createElementVNode("option",{value:"newest"},"Newest",-1);var Ue=[Le,Oe];var He={class:"Posts Flow"};var ze={key:4,class:"GreyColor"};var je=e.createElementVNode("spriteIcon",{class:"MiscIcon ShowContentIcon"},null,-1);var Ge=e.createElementVNode("span",null,"Load More Comments",-1);var We=[je,Ge];var qe={key:0,class:"StrangeBerryModal"};var Qe=e.createElementVNode("spriteIcon",{class:"MiscIcon CloseIcon"},null,-1);var Ye=[Qe];var Je=e.createElementVNode("div",{class:"FormTitle"},"Trash Comment",-1);var Ke={key:0,class:"StrangeBerryInput"};var Xe={for:"_idRuleRow"};var Ze=e.createElementVNode("span",null,"Site Rule Violation",-1);var $e={class:"RequiredInput"};var et=e.createElementVNode("span",null,"Required",-1);var tt={class:"InputWrapper"};var ot=["value"];var nt={class:"StrangeBerryInput"};var at={class:"InputWrapper"};var rt=["disabled"];var st=e.createElementVNode("spriteIcon",{class:"SubnavigatorIcon TrashIcon"},null,-1);var lt=e.createElementVNode("span",null,"Trash",-1);var ct=[st,lt];var it={key:1,class:"StrangeBerryModal"};var pt=e.createElementVNode("spriteIcon",{class:"MiscIcon CloseIcon"},null,-1);var dt=[pt];var ut=e.createElementVNode("div",{class:"FormTitle"},"Untrash Comment",-1);var mt={key:0,class:"StrangeBerryInput"};var vt={for:"_idRuleRow"};var ft=e.createElementVNode("span",null,"Reason",-1);var kt={class:"RequiredInput"};var yt=e.createElementVNode("span",null,"Required",-1);var gt={class:"InputWrapper"};var _t=e.createElementVNode("option",{value:""},"Select a reason",-1);var Bt=["value"];var ht={class:"StrangeBerryInput"};var Et={class:"InputWrapper"};var bt=["disabled"];var Nt=e.createElementVNode("spriteIcon",{class:"SubnavigatorIcon TrashIcon"},null,-1);var Pt=e.createElementVNode("span",null,"Untrash",-1);var Ct=[Nt,Pt];var Vt={key:2,class:"StrangeBerryModal"};var St=e.createElementVNode("spriteIcon",{class:"MiscIcon CloseIcon"},null,-1);var It=[St];var wt=e.createElementVNode("div",null,[e.createElementVNode("div",{class:"StrangeBerryHeading"},"Stamps"),e.createElementVNode("div",{class:"StrangeBerryFadedText"},"Stamps help others understand your feelings towards a post.")],-1);var Tt={class:"Cluster"};var Rt=["value","disabled"];var Dt=e.createElementVNode("div",{class:"StrangeBerryHeading"},"Reset",-1);var xt=e.createElementVNode("div",{class:"StrangeBerryFadedText"},"This will remove all your stamps on this post. You will still need to save changes.",-1);var Ft=["disabled"];var At=e.createElementVNode("spriteIcon",{class:"MiscIcon DiskIcon"},null,-1);var Mt=e.createElementVNode("span",null,"Save",-1);var Lt=[At,Mt];var Ot={key:3,class:"StrangeBerryModal"};var Ut=e.createElementVNode("spriteIcon",{class:"MiscIcon CloseIcon"},null,-1);var Ht=[Ut];var zt={class:"FormTitle"};var jt={class:"StrangeBerryInput"};var Gt={class:"InputWrapper"};var Wt=["disabled"];function qt(t,o,n,a,r,s){var l,c,i,p;var d=e.resolveComponent("Paginator");var u=e.resolveComponent("Post");var m=e.resolveComponent("Loader");var v=e.resolveComponent("matIcon");var f=e.resolveComponent("ContentEditable");var k=e.resolveDirective("tippy-delegate");var y=e.resolveDirective("replace-container");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives((e.openBlock(),e.createElementBlock("module",Se,[t.section.key!="Post"?(e.openBlock(),e.createElementBlock("h2",Ie,"Comments")):e.createCommentVNode("v-if",true),e.createElementVNode("div",we,[t.config.Post_Add?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"IconButton",onClick:o[0]||(o[0]=function(e){return t.actionHandler("add")})},De)):e.createCommentVNode("v-if",true),xe,t.section.key!="Post"?(e.openBlock(),e.createElementBlock("fieldset",Fe,[e.createElementVNode("label",null,[Ae,e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":o[1]||(o[1]=function(e){return t.params._sSort=e}),onChange:o[2]||(o[2]=function(e){return t.load(1)}),disabled:t.loading},Ue,40,Me),[[e.vModelSelect,t.params._sSort]])])])):e.createCommentVNode("v-if",true),t.navigator=="buttons"&&t.section.key!="Post"&&t.totalPages>1?(e.openBlock(),e.createBlock(d,{key:2,totalPages:t.totalPages,modelValue:t.params._nPage,"onUpdate:modelValue":[o[3]||(o[3]=function(e){return t.params._nPage=e}),o[4]||(o[4]=function(e){return t.load(t.params._nPage)})],loading:t.loading},null,8,["totalPages","modelValue","loading"])):e.createCommentVNode("v-if",true),e.withDirectives((e.openBlock(),e.createElementBlock("div",He,[(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.records,(function(t){return e.openBlock(),e.createBlock(u,{post:t,key:t._idRow},null,8,["post"])})),128))])),[[k,t.tippyDelegateConfig]]),t.loading?(e.openBlock(),e.createBlock(m,{key:3})):!t.records.length?(e.openBlock(),e.createElementBlock("div",ze,"No comments yet!")):t.navigator=="infinite"&&!t.complete?(e.openBlock(),e.createElementBlock("button",{key:5,type:"button",onClick:o[5]||(o[5]=function(e){return t.load()}),class:"ExtendedContentButton"},We)):e.createCommentVNode("v-if",true)])])),[[y]]),(e.openBlock(),e.createBlock(e.Teleport,{to:(l=t.model)!==null&&l!==void 0&&(c=l.post)!==null&&c!==void 0&&c._idRow||(i=t.model)!==null&&i!==void 0&&(p=i.parent)!==null&&p!==void 0&&p._idRow?"#post_".concat(t.model.post._idRow||t.model.parent._idRow," .FormWrapper"):"#PostsListModule_Add"},[t.model&&t.model.action=="trash"?(e.openBlock(),e.createElementBlock("div",qe,[e.createElementVNode("button",{class:"TransparentButton IconOnlyButton CloseButton",onClick:o[6]||(o[6]=function(e){return t.model=null})},Ye),Je,e.createElementVNode("form",{class:"Flow",onSubmit:o[9]||(o[9]=e.withModifiers((function(){return t.trash&&t.trash.apply(t,arguments)}),["prevent"]))},[!t.model.post.accessorIsSelf?(e.openBlock(),e.createElementBlock("div",Ke,[e.createElementVNode("label",Xe,[Ze,e.createElementVNode("stateLabel",$e,[e.createVNode(v,null,{default:e.withCtx((function(){return[e.createTextVNode("info")]})),_:1}),et])]),e.createElementVNode("div",tt,[e.withDirectives(e.createElementVNode("select",{name:"_idRuleRow","onUpdate:modelValue":o[7]||(o[7]=function(e){return t.model._idRuleRow=e})},[(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.reasons,(function(t){return e.openBlock(),e.createElementBlock("option",{key:t._idRow,value:t._idRow},e.toDisplayString(t._sName),9,ot)})),128))],512),[[e.vModelSelect,t.model._idRuleRow]])])])):e.createCommentVNode("v-if",true),e.createElementVNode("div",nt,[e.createElementVNode("label",null,e.toDisplayString(t.model.post.accessorIsSelf?"Reason":"Additional Details"),1),e.createElementVNode("div",at,[e.createVNode(f,{modelValue:t.model._sNotes,"onUpdate:modelValue":o[8]||(o[8]=function(e){return t.model._sNotes=e}),"input-id":"_sNotes"},null,8,["modelValue"])])]),e.createElementVNode("button",{type:"submit",class:e.normalizeClass(["IconButton",{Processing:t.trashProcessing}]),disabled:t.trashProcessing},ct,10,rt)],32)])):t.model&&t.model.action=="untrash"?(e.openBlock(),e.createElementBlock("div",it,[e.createElementVNode("button",{class:"TransparentButton IconOnlyButton CloseButton",onClick:o[10]||(o[10]=function(e){return t.model=null})},dt),ut,e.createElementVNode("form",{class:"Flow",onSubmit:o[13]||(o[13]=e.withModifiers((function(){return t.untrash&&t.untrash.apply(t,arguments)}),["prevent"]))},[!t.model.post.accessorIsSelf?(e.openBlock(),e.createElementBlock("div",mt,[e.createElementVNode("label",vt,[ft,e.createElementVNode("stateLabel",kt,[e.createVNode(v,null,{default:e.withCtx((function(){return[e.createTextVNode("info")]})),_:1}),yt])]),e.createElementVNode("div",gt,[e.withDirectives(e.createElementVNode("select",{name:"_idReasonRow","onUpdate:modelValue":o[11]||(o[11]=function(e){return t.model._idReasonRow=e})},[_t,(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.untrashReasons,(function(t,o){return e.openBlock(),e.createElementBlock("option",{key:o,value:o},e.toDisplayString(t),9,Bt)})),128))],512),[[e.vModelSelect,t.model._idReasonRow]])])])):e.createCommentVNode("v-if",true),e.createElementVNode("div",ht,[e.createElementVNode("label",null,e.toDisplayString(t.model.post.accessorIsSelf?"Reason":"Additional Details"),1),e.createElementVNode("div",Et,[e.createVNode(f,{modelValue:t.model._sNotes,"onUpdate:modelValue":o[12]||(o[12]=function(e){return t.model._sNotes=e}),"input-id":"_sNotes"},null,8,["modelValue"])])]),e.createElementVNode("button",{type:"submit",class:e.normalizeClass(["IconButton",{Processing:t.untrashProcessing}]),disabled:t.untrashProcessing},Ct,10,bt)],32)])):t.model&&t.model.action=="stamp"?(e.openBlock(),e.createElementBlock("div",Vt,[e.createElementVNode("button",{class:"TransparentButton IconOnlyButton CloseButton",onClick:o[14]||(o[14]=function(e){return t.model=null})},It),!t.model.stamps?(e.openBlock(),e.createBlock(m,{key:0})):(e.openBlock(),e.createElementBlock("form",{key:1,class:"Flow StampsForm",onSubmit:o[17]||(o[17]=e.withModifiers((function(){return t.stamp&&t.stamp.apply(t,arguments)}),["prevent"]))},[wt,(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.stamps.config,(function(n){return e.openBlock(),e.createElementBlock("div",{key:n},[e.createElementVNode("h4",{class:e.normalizeClass(n["class"])},e.toDisplayString(n.title),3),e.createElementVNode("div",Tt,[(e.openBlock(true),e.createElementBlock(e.Fragment,null,e.renderList(t.stamps[n.key],(function(n){return e.openBlock(),e.createElementBlock("label",{class:e.normalizeClass(["ButtonLike IconButton",{Selected:t.model.stamps.includes(n._idRow),Locked:n.locked}]),key:n._idRow},[e.withDirectives(e.createElementVNode("input",{type:"checkbox",value:n._idRow,"onUpdate:modelValue":o[15]||(o[15]=function(e){return t.model.stamps=e}),disabled:n.locked},null,8,Rt),[[e.vModelCheckbox,t.model.stamps]]),e.createElementVNode("spriteIcon",{class:e.normalizeClass(n._sIconClasses)},null,2),e.createElementVNode("span",null,e.toDisplayString(n._sTitle),1)],2)})),128))])])})),128)),e.createElementVNode("div",null,[Dt,xt,e.createElementVNode("button",{type:"button",onClick:o[16]||(o[16]=function(e){return t.model.stamps=[]})},"Reset")]),e.createElementVNode("button",{type:"submit",class:e.normalizeClass(["IconButton",{Processing:t.stampProcessing}]),disabled:t.stampProcessing},Lt,10,Ft)],32))])):t.model?(e.openBlock(),e.createElementBlock("div",Ot,[e.createElementVNode("button",{class:"TransparentButton IconOnlyButton CloseButton",onClick:o[18]||(o[18]=function(e){return t.model=null})},Ht),e.createElementVNode("div",zt,[t.model.parent?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode("Reply to "+e.toDisplayString(t.model.parent._aPoster._sName),1)],64)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createTextVNode(e.toDisplayString(t.model.post._idRow?"Edit Comment":"Add Comment"),1)],64))]),e.createElementVNode("form",{class:"Flow",onSubmit:o[20]||(o[20]=e.withModifiers((function(){return t.submit&&t.submit.apply(t,arguments)}),["prevent"]))},[e.createElementVNode("div",jt,[e.createElementVNode("div",Gt,[e.createVNode(f,{modelValue:t.model.post._sText,"onUpdate:modelValue":o[19]||(o[19]=function(e){return t.model.post._sText=e}),"input-id":"_sText"},null,8,["modelValue"])])]),e.createElementVNode("button",{type:"submit",class:e.normalizeClass(["IconButton",{Processing:t.processing}]),disabled:t.processing},[e.createElementVNode("spriteIcon",{class:e.normalizeClass(t.model.post._idRow?"MiscIcon DiskIcon":"MiscIcon SubmitIcon")},null,2),e.createElementVNode("span",null,e.toDisplayString(t.model.post._idRow?"Save":"Submit"),1)],10,Wt)],32)])):e.createCommentVNode("v-if",true)],8,["to"]))],64)}function Qt(e,t){if(t===void 0)t={};var o=t.insertAt;if(!e||typeof document==="undefined"){return}var n=document.head||document.getElementsByTagName("head")[0];var a=document.createElement("style");a.type="text/css";if(o==="top"){if(n.firstChild){n.insertBefore(a,n.firstChild)}else{n.appendChild(a)}}else{n.appendChild(a)}if(a.styleSheet){a.styleSheet.cssText=e}else{a.appendChild(document.createTextNode(e))}}var Yt='.RichText li > p\r\n{\r\n\tdisplay : inline;\n}\n.FormTitle\r\n{\r\n\tfont-weight      : 600;\r\n\ttext-transform   : uppercase;\r\n\tmargin-block-end : 1em;\n}\n.Posts\r\n{\r\n\tmargin-top : 2em;\n}\n.Posts .Post\r\n{\r\n\tborder-top  : 1px solid rgba(255 255 255 / 5%);\r\n\tpadding-top : 1em;\n}\n.Posts .Post[data-pin-level="4"] > .PostHeader\r\n{\r\n\tbackground : linear-gradient(#FF4E4E59, transparent);\n}\n.Posts .Post[data-pin-level="3"] > .PostHeader\r\n{\r\n\tbackground : linear-gradient(#6CB1E159, transparent);\n}\n.Posts .Post[data-pin-level="2"] > .PostHeader,\r\n.Posts .Post[data-pin-level="1"] > .PostHeader\r\n{\r\n\tbackground : linear-gradient(#6EE16C59, transparent);\n}\n.Replies\r\n{\r\n\tpadding-inline-start : 1em;\r\n\tborder-inline-start  : 1px solid hsl(0 0% 100% / 5%);\n}\n.Replies .Avatar\r\n{\r\n\twidth  : 1.5em;\r\n\theight : 1.5em;\n}\n.Post.Trashed > .RichText\r\n{\r\n\topacity    : .5;\r\n\tfont-style : italic;\n}\n.Post.Trashed .TrashNotice\r\n{\r\n\tfont-size : var(--DefaultSmallFontSize);\n}\n.Post.Trashed .TrashDetails\r\n{\r\n\tfont-family : var(--DefaultTechnicalFontFamily);\n}\n.Post.IsExemplary\r\n{\r\n\tborder-width  : 0.125em;\r\n\tborder-style  : solid;\r\n\tborder-color  : var(--DefaultGreenColor);\r\n\tborder-radius : 0.25em;\r\n\tpadding       : 1em;\r\n\tbox-shadow    : inset 0 0 25px #6ee16c 59;\r\n\tmargin        : 0 -0.5em 1em -0.5em;\n}\n.PostHeader .TimeStamp\r\n{\r\n\tdisplay     : inline-flex;\r\n\tfont-size   : var(--DefaultSmallFontSize);\r\n\talign-items : center;\n}\n.PostHeader stateLabel\r\n{\r\n\tfont-size: var(--DefaultSmallFontSize);\n}\n.PostHeader stateLabel[data-label="Exemplary"]\r\n{\r\n\tcolor: var(--DefaultGreenColor);\n}\n.PostHeader stateLabel[data-label="Submitter"],\r\n.PostHeader stateLabel[data-label="Contributor"]\r\n{\r\n\tcolor: var(--DefaultBlueColor);\n}\n.PostHeader .Poster small\r\n{\r\n\tdisplay     : block;\r\n\tfont-weight : normal;\r\n\tfont-size   : var(--DefaultTinyFontSize);\n}\n.PostHeader time\r\n{\r\n\tfont-size: var(--DefaultTinyFontSize);\n}\n.PostFooter\r\n{\r\n\tcolor      : var(--DefaultGreyColor);\r\n\tfont-style : italic;\r\n\tfont-size  : var(--DefaultTinyFontSize);\n}\r\n\r\n/* STAMPS */\n.PostStamp\r\n{\r\n\t--PostStampColor : var(--DefaultGreyColor);\r\n\tbackground       : #1c272e;\r\n\tfont-weight      : bold;\r\n\tpadding          : 0.25em 0.5em;\r\n\tborder-radius    : 0.125em;\r\n\tdisplay          : flex;\r\n\talign-items      : center;\r\n\tcolor            : var(--PostStampColor);\r\n\tborder-left      : 1em solid;\n}\n.PostStamp spriteIcon\r\n{\r\n\tmargin-right : 0.25em;\n}\n.PostStamp[data-_sCategory=negative]\r\n{\r\n\t--PostStampColor : var(--DefaultRedColor);\n}\n.PostStamp[data-_sCategory=positive]\r\n{\r\n\t--PostStampColor : var(--DefaultGreenColor);\n}\n.PostStamps:hover\r\n{\r\n\tcursor: help;\n}\r\n\r\n/* TOOLS */\n.PostTools\r\n{\r\n\topacity    : 0.5;\r\n\ttransition : opacity 0.25s ease-in-out;\n}\n.PostTools:hover\r\n{\r\n\topacity : 1;\n}\n#Add::empty,\r\n.FormWrapper::empty\r\n{\r\n\tdisplay : none;\n}\n.Stampers\r\n{\r\n\t--ClusterGap : 1em;\r\n\talign-items  : flex-start;\r\n\tfont-size    : var(--DefaultSmallFontSize);\r\n\tmax-height   : 300px;\r\n\toverflow     : auto;\n}\n.Stampers ul\r\n{\r\n\tlist-style-type : none;\n}\n.Posts .PostIndicatorIcon\r\n{\r\n\tmargin-left  : auto;\r\n\tmargin-right : .5em;\r\n\twidth        : 32px;\r\n\theight       : 32px;\n}\n.StampsForm input\r\n{\r\n\tdisplay : none;\n}\n.StampsExpanded\r\n{\r\n\topacity : .5;\n}\n.StampsForm .Selected,\r\n.StampsForm .Selected:hover\r\n{\r\n\tbackground : var(--DefaultGreenDarkColor);\r\n\tcolor      : var(--ButtonHoverFontColor);\n}\n.StampsForm .Locked\r\n{\r\n\tcursor  : not-allowed;\r\n\topacity : .5;\n}\n#PostsListModule .CategoryFilters\r\n{\r\n\tmargin : 1em 0;\n}\n.PostImages img\r\n{\r\n\tdisplay    : block;\r\n\twidth      : 100px;\r\n\theight     : 100px;\r\n\tobject-fit : contain;\n}';Qt(Yt);Ve.render=qt;Ve.__file="src/_Components/PostsList/_Root/index.vue";return Ve}(Vue,_gb);
